=====  API Cleanup  =====

4	Move has prompt for both: select token & destination.
4	Replace Dynamic Defend with visible tokens.
4	Badlands as Damage Mod - See if Badlands can be made a MOD instead of special case it is.
4	Spirit-Damage - See if bonus spirit damage (Heart of Wildfire) can me turned into a SpaceMod
4	Create a Island-Wide-Mod bucket inside ActionScope that goes away at end of Action.  or maybe IEndWhenActionEnds
4	BoundedPresence in TargetSpaceCtx - how is it used
4	Space methods - clean up so easier to understand.
3	Add Bonus tags to elements to support "can-be-counted-as"
3	Simplify TokenMover
3	Hooks - Review all and see if any are redundant / should be moved
2	Move general-purpose SpiritActions into a SpiritActions folder
2	Move Extension methods into their own namespaces so user can opt-in
2	Switch Empowered Incarna markers to use the '+' icon or indicate empowered.

=====  Test Cleanup  =====

4	Review Tests and get rid of the TestFixtureSetup

=====  UI Improvement  =====

5	UI - Drag and drop!

4	Custom Tokens for Horizon spirits.
4	UI - Landscape layout
	UI - Display Card Images
	UI - Display Icons in Text (card descriptions)

3	Spirit Details View during configure-new-game.

=====  Missing Feature  =====

	Scenarios
	Events

=====  Possible Bonuses / Nice to haves  =====

	CONFIG - replay game
	Spirit Hints (best boards, starting Growths, card plays)
	Project that generates Artwork

=====  Needs Tests  =====

	UI - Cast Down into the Briny Deep - TEST

=============================

== Other Hooks ==
	public class BuildEngine { 
		public event Func<Space, HumanToken, Task>? BuildComplete;
	}
	public class ExploreEngine {
		public event Func<GameState,Task>? ExploreForCardComplete;
		public event Func<Space,Task>? ExploredSpace;
	}
	public class InvaderCard{
		CardRevealed
	}
	public class Fear : IHaveMemento {
		public event Action<IFearCard>? CardActivated;
	}
	public InvaderBinding{
		event InvaderDamaged
	}

==== Maui questions / Problems ====

Why is it better to show/hide popups instead of re-creating them?

Slide-In - how to do it?

MVVM threading - best practice
	> When button click, model runs on UI thread
	> when model has event, thread is marshaled to UI thread.

Landscape vs Portrait - different Views?

Derived types in an enumeratoins.

When are pages torn down and rebuilt when switching pages?


==== What I learned ====
Using execution context to create ActionScope unit-of-work
Using execution context to store GameState to avoid passing to everything.
Tokens (visible) & Mods (invisible) are placed on space and implement various behaviors like Imodify adding/removing and IHandle Added/Removed
The basic way the engine using Async to wait on user input.

Use a SourceSelector (SpaceToken-Selector) that is highly configurable to specify what tokens an action is going to happen to.

Encapsulation is the King - if you can't change it, encapsulate it.
Try to avoid inheriting more than 1 level.  
Don't move specific rules into the base (that solves 1 problem).  Move generic rules into the base that solves many.
Override methods to change behavior.  Hook into events to augment (add to) behavior.
Instead of deriving a new class for every change.  Break the behavior into behavior objects and mix and match.

Single inheritance ===> Prefer Composition over Inheritance

Text + Action<T> creates SpiritActions and SpaceActions.  Commands that act on a context <T>.

In tests:  Start an async method, make the UI calls, then await the Task to complete before checking stuff.

async in parallel can choke off threads - xUnit - limit # of tests running in parallel using Collections

Events allow us to NOT have to derive new types.  Use events to Augment behaviour.  Override to change it.

When diriving a new type, ALL methods should be changed or else the feature you are changing could be a smaller object. Like Interface Segregation princile.

Mod Buckets are like Events on Steriods and let us add/remove them in groups.

Commands vs Actions 
	- Commands don't have an .Execute method.  They are more like method calls or Args parameters that invoke somethine else to actually perform the requested command.
	- Actions DO have an .Execute method.  They are pre-defined and not up to interpretation.

==== Notes to Developers ====
When the game throws an exception, it will appear in the game Log.   Don't click a UI option again or it will lock up and you can't see it.


==== Gems ====
* GameState.Current
* ActionScope
* Token Event Handlers: IModify[Adding|Removing][|Async], IHandleToken[Added|Removed]
* SourceSelector
* IActOn<T> derivative actions
* Adversary Levels

==== Lemons ====
How Spirits make Selections (too many mismatched options)
Game-wide config
The Invader Deck
InvaderBinding and Invader damage
Absolute Stasis
Powers that Prevent Dahan Damage or Invader Damage
.Rewind()
How the Pusher is confluently configured. :(

==== Quirks ====
Always use the < or <= sign, never the > or >= sign.

=====  Damage Pipeline - Notes  =====

When doing damage and destroying, call must go through Token, and then Space so that each can intercept and modify behavior.
	Caller => Token.Destory => Space.Remove(or Destroy) => Token-Event-Hooks(Adding/Removing Token & Token Added/Removed).

When not doing damage, assuming other actions behavior doesn't get modified, can call Space.Remove directly. (just not for Destroying).

Dahan and Invader Bindings 
	* are sealed and cannot modify behavior
	* are just Large-Group Management objects and should delegate damage to the Token => Space.Remove/Destroy

==== To Do ====

GATHER - Replace TokenGatherer (on Space) with .GatherSource( beforeToken ) which returns a SourceSelector
PUSH - Instead of custom TokenPushers - break into pieces and customize only  (# pushed) (PushDestinations)
Add ActionScope Run-At-Max hook for converting Present.Done to Present.Always for Trickster

==========

RANGE - 3 Types of .Range: (1) Spirit.PowerRange, (2) Space.Range (3) Space.Range - make sure everything is using the correct one and see if we can reduce/rename the methods so it is easier to pick the correct one.
DAMAGE - Make ctx.DamageInvaders(...) a shortcut to ctx.Group(Human.Invaders).DoDamageAsync(...);
TOKENS-Shortcut - Remove ctx.XX shortcut to Tokens.XX bindings OR make everything that has a TargetSpaceCtx use it.
TOKENS-Shortcut - TargetSpaceCtx.RemoveBlight() maybe should be .Blight.RemoveAsync()
Check calls to xxx_OfAnyTag( tags...) and see how many need converted to SpaceToken and switch over to SpaceToken
is convenience-method Space.HasInvaders() necessary?  Could we just call the OfTag stuff direclty
Async-Enum Spirit - Select 1 - encapsulate selecting 0 or 1 spirits so that we can forEach them.  (ConsiderAHarmoniousNature)

=========================
====  Clean Up Items  ====
==========================

For Multi Player
	== Option 1 == 
		when starting action, make copy of the tokens
		- each action get an incremental ID
		- operate on the copy
		- track spaces
		- when done, commit => if any (spaces,spirits?,cards?) have been modified since start, rollback.
    -- Option 2 --
		- when interacting with spaces, have space join the Action
		- spaces that are part of an action cannot be joined to another action.
		- visual indication of which spaces are joined so user can wait or not select them
		- ! need to watch for deadlocks

For Action => Move Finders Hook to Action-start - event

ManyMinds - Set out-of-band toggle on beasts, at start of action, make smart choices based on phase, then use user choice sync for powers

=========================
===== Feature Focus =====
=========================
* 2 spirit game (but still 1 player)

== Architecture ==
Multiplayer Network Play

== UI improvement ==
Event driven UI updates

== Verify ==
Visions of shifting Future - fix once we support events - use Randomizer so it is repeatable.
The Past Returns again - implement all spirits paying.

=====  Steam Updates  =============
provide insight as to what they have trouble with
https://store.steampowered.com/news/app/1236720
https://spiritislandwiki.com/index.php?title=Main_Page
http://nerdroomsoftware.com/apps/SpiritGuide/spirits.php
