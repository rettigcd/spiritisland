== BUG ==

TargetSpaceCtx => RemoveUpToN   needs implemented.
PlayCardForCost - looks like it is repeating card, not playing from HAND
Figure out why Setup-Action needs triggered from inside Spirit and at beginning of SinglePlayerGame (ocean/sharp fangs)
Blight generated by Heart of Wildfire placing presence doesn't seem to cascase nor flip Blight Card.

=====  Simple - Implement  ====

Load Win/Loss checks into a list that is evaluated.  Only load list for real games.  Leave empty for testing.
Save DynamicTokens_ForGame to memento. / Clear DynamicTokens_ForRound when memento is restored.
SavageRevenge - create a display-only option (with no elements) to show general information. Use for Lure's 2nd innate also.
Fractured days - Implement gain a time for single solo mode
Fractured Days - in spirit - create a deck list instead of overriding

Stones unyealding - Draw GainElments as an AND
Visions of shifting future - use Ransomizer so it is repeatable.
Switch blight actions from Start-of-Ravage to Start-of-invader phase (for when we have fear and events)
Implement Face-up / face-down for deck cards so we can see what stage a card is before revealing it.
Drawing Fractured Days # of card plays.

==== Finish ====

Blight - All Things Weeken - finish implementation - blight triggeres on 1 and does other stuff
Starlight seeks its form - missing +1 energy in growth track.
Settle into hunting grounds - implement presence cannot move.
Absolute Stasis - figue out how to not hide cities from Victory check
Slip the flows of time - use any # of times

==== Refactor / Cleanup ====

CardDrawer - get rid of power progression cards in tests, then make Card Drawer private and clean it up.
InvaderDeck.KeepBuildCards - can we make this go away. Make something cleaner?
Don't instanciate PowerCards / FearCards that are in the deck until they are drawn.
Make Spirit.ResolveActions private/protected.
Can we Set Spirit.GameState property and then not pass it everywhere?
TokenCountDictionary.counts -> make private.
Review items that are PickSpace then Pick Token into a single pick-space-token step.
CachedImageDrawer - make it draw the images
Convert TargetSpaceCtx action Methods to Commands
Demoralized : 1 : Defend 1 in all lands):Demoralized : 1 : Defend 1 in all lands - Don't defend in Ocean

==== BLIGHT ====

Entrap the Forces of Corruption
	- Powers that add blight are supposed to cause cascade
Over enthusiastic arson - blight should cascade.
Blight and cascading (from power might not happen)
TargetSpaceCtx.HasBlight should go throught the Tokens.Blight
Consolidate the Blight API - HasBlight/AddBlight/RemoveBlight.  Etc.
	- make sure we don't accidentally do an .Adjust when it should really add to/remove from card.

====  Test  ====

Check if Gates of Deepest Power has bug that allows duplicate cards. like 1 in discard and one in hand.
Check if anything is calling Spirit.GetTargetOptions directly and skipping over Shadows ability to pay to target.
TargetSpaceCtx.IsOneOf needs tests to ensure it uses Terrain Mapper.
Test GatherTheScatteredLightOfStars - to see if forgetting a power card creates a null card.
Volcano Looming High - check if spirit can place presence outside mountain during power card use.
Explosive Erruption should not destroy volcano presence - TEST!
RepeatCardForCost - Add test that it pulls from Used actions, NOT discard pile.
Make sure win/loss is checked after every spirit action / power card
TokenCountDictionary.MoveTo (test that correct events are published)
Review SpiritPresence.RemoveFrom_NoCheck( Space space, GameState gameState ) {
Don't let Pusher/Gatherer move frozen dahan. - add tests!
Test- Bats Scoutt... secondary damage didn't seem to be working.
TEST - Upgrading or downgrading explorers with strife, should maintain strife.


==== Action - Unit of Work =========
Tracking Actions with GUID on spirit will not work for multi-player games.
Make Badlands Damage work properly - once per action.
Never Heard from Again - calculate explorers killed for fear as a whole

==== Ravage ====

DamageDefenders calculations are wrong. Doesn't handle pre-damaged dahan nor explorers helping (Power of Command)
Unstrife damaged striffed
 	- would be nice to use Ravage engeine to accomplish this and not requie spirit input.
 	- damage spills over onto unstrifed
Each time dahan are destroyed, destroy 2 fewer.
	- only implemented for Ravage
ConfigureRavage.DamageFromInvader - move outside of ravage so it effects other things too?
DestroyInvaderStrategy - can this be consolidated into The PublishToken api?  
DestroyDahan - can this be merged into the TokenCountDictionary?

==== Token Management =====

WreakVengeanceForTheLandsCorruption - virtual tokens might not be correct.
Add Token.MoveFrom method to simplify Draw-Into-Void
HazardsSpreadAcrossTheIsland - should this trigger and AddToken event?
Presence as Tokens - Need access to GameState when doing Token Things
DahanGroupBinding.Drown should be async so UI will update.
Publish token events to the UI so that it can show token changing.

====  Not Yet Supported  =====

TheWoundedWildReturnsOnItsAssailants - fix once we support multiple players / boards
Cast Down Into the Briny Deep - Implement
Weave together the Fabric... fix once we get multiple players / boards
Dream of the Untouched Land - implement once we support multiple players / boards
Visions of shifting Future - fix once we support events.
The Past Returns again - implement all spirits paying.
Pour Time Sideways 
	- Adding Explore on target board is not implemented. 
	- Adding Ravage on target board not implemented.  (should only add spaces that match card)
	- Add Build should filter on spaces that match card.

====  API  ====

Consilidate GameState API - things that aren't data and have no theoretical state.  Spirits could hand on to them and not have to pass gamestate around.





=========================================================


Cleanup..
	Merge Config Ravage and Ravage Engine
	* Simplify syntax for selecting TokensFromManySpaces
	* Consolidate => Single PresenceOnBoardChanged event
	* rollback virtual defence, hook from Presence / Tokens changed event.
	* ForgetCard
		- rename ForgetCard to ForgetCard_UserChoice
		- Consolidate the 2 ForgetCard methods into 1

GUI
	- layout of Fear / Blight items
	- Put Build / Ravage / fear in strip along the top 
	- display # of cards remaining in fear deck before next terror level
	- Configure Game - Images for Selecting Spirits / Boards / Token colors
	- Visual indicator of Phase
	- Show fear cards while they are being resolved.
	- Create a target-space preview, when hovering over cards
	- Show back side of explore card (so they no what stage it is)
	- Display Blight Card and/or text
	- Show backside of next explorer card

Game Engine 
	- Bind each Spirit Action to a CTX, so we can:
		- detect distinct actions
		- commit actions like transactions
		- Check win/lose state at the end of each action.


AI - Search
	- Create a search tree algorythm that can play the game
	- Heuristic to measure end-of-round goodness.

	Maximizes: Power Points Played - Ignore State of the board.

	Must be aware of:
	  - items that destory presence or return it to board
	  - items that give energy
	  - card elements
	  - items that give extraw card plays or extra draw-cards.

	Categorize cards:
	  - Attack
	  - Defend
	  - Energy
	  - Card Plays
	  - Movement
	  - Fear




-- Helpful --

** Create a Token API  (MoveFrom,MoveTo,Destroy,Replace,Setup)

Refactor Testing to make it easier to test.

2) TargetSpaceCtx.DamageInvaders - limit badland damage to once / action

Make Push a 1-step commmand
	- for custom destinations, add them to Push API
	- Embed guaranteed next decision in selecting source token
	- UI selects entire move before sequentially submitting: source token, destination

== Road Map to Awesomeness ==
* HARD	Multi Player 
* MED	Multi Platform (Linux / Android)
* MED	Internet Play
* MED	AI Player
* EASY	Draw Power Cards
* EASY  DRAW Boards
* EASY  Draw Fear Cards

== Bonus - Fun ==

3 Show # of cards remaining in fear deck until next threshold

2 When presenting options, Icon-draw them.
3 draw innates - range icons, Target icons, clean tokens, +1 range
1 Cards ui - scrolling, decks & discard pile, 

===================

REFACTOR	InvaderGroup Damage/Destory methods.  Create a virtual 'included tokens' group that combines single-token and token Group actions

Engine	Check Game Win/Loss

====================================================================================
== Steam updates - What's New (provide insight as to what they have trouble with) ==
https://store.steampowered.com/news/app/1236720

https://spiritislandwiki.com/index.php?title=Main_Page

http://nerdroomsoftware.com/apps/SpiritGuide/spirits.php
