
Plan:
	Create Interface of Space-Properties needed for Predicate
	Have SpaceCtx implement interface.
	Have SpaceFilterMap use interface.
	Replace SpaceFilterMap with a group of Named Space filters, so we can pass them as objects to .From()

Things that might effect Fear-based Spaces
	IsCoastal or IsInland
		due to:
			Hummingbird (temporary adjacencies) - if this is Adjacen, this should be ok.
			Weave Together (different type of space) - should be in the space and ok

Is In Play
	- based on: Ocean
	- Ocean: InPlay for powers and blight, NOT InPlay for invaders, fear, growth.
	IsInPlay

==========================
====  Clean Up Items  ====
==========================
5 Move Finders Hook to Action-start
5 Convert all Fear Cards to Commands

4 ForgetCard - rename ForgetCard to ForgetCard_UserChoice AND/OR Consolidate the 2 ForgetCard methods into 1
4 CardDrawer - get rid of power progression cards in tests, then make Card Drawer private and clean it up.
4 Draw back side of Invader Cards
4 Draw Adversary details
4 Display individual cards / counts

3 Add special-rules logging as Debug, so we can see what happened.
3 Make Virtual / Calculated Tokens work for types other than Defense
3 Switch Explore & Ravage over to use Explore Tokens and Ravage Tokens
3 Review items that are PickSpace then Pick Token into a single pick-space-token step.
3 Shifting Memory - Prepared elements.  Add them AFTER the action has completed.

2 Consilidate GameState API - things that aren't data and have no theoretical state.  Spirits could hand on to them and not have to pass gamestate around.
2 Merge Config Ravage and Ravage Engine
2 Simplify syntax for selecting TokensFromManySpaces
2 Consolidate => Single PresenceOnBoardChanged event
2 CachedImageDrawer - make it draw the images

TokenCountDictionary.counts -> make private.
Make Spirit.ResolveActions private/protected.
Can we Set Spirit.GameState property and then not pass it everywhere?
Convert TargetSpaceCtx action Methods to Commands

Idea - All of the Stop Tokens are actually just Pre-Build, Pre-Explore, Pre-Ravage events/configures
Idea - Could the DoRavage token also be the Ravage Configuration used in ModifyRavage?
Idea - Make Ravage / Build / Explore consistent in using UnitOfWork

Instead of reacting to PresenceMoved / Removed / Added events, have the Presence do the actions itself.

=========================
===== Feature Focus =====
=========================
* 2 spirit game (but still 1 player)
* 3 Adversaries (Habsburg, Russia, Scotland)
* Remaining spirit (Finder of Paths)
* Mobile
	- Spirit's 3 controls
	- Island control with tokens
	- Invader cards
	- Power Cards
	- Fear pool / cards

* replace Frozen dahan with RemovingToken handler (and DamagingToken handler)

* Display Adversary details
* Display Back side of Invader card

Later: Events
Later: Scenarios
Later: Web Hosted

* Implement Face-up / face-down for deck cards so we can see what stage a card is before revealing it.
* Show # of Invader cards left in deck
* Visions of shifting future - use Randomizer so it is repeatable.

! Save Game in Recent Games list so we can replay them.

----- Spirit Island ----

* Adversaries
	show flag
	Log setup adjustments

* Command-Beast
	show graphic (so it doesn't get lost in text)

* Display back of explorer card.

=================================

Some Commands need a title like the Power Card Name, other's need detailed description of what they do.

Create TargetSpaceCtx filter type.

Adjusting Hue for tokens:  RGB > YIQ > YIQ > RGB
===============================

== Architecture ==
Run on Android
Multiplayer Network Play

== UI improvement ==
Flatten Move
Interactive Card-Play selector w/ commit
Event driven UI updates
Flatten out-of-phase action selection.

== Missing ==
Destroy Board
Add new board.
Unlock the Gates - triggers all element thresholds
Revamp Skips - only skip actions that happen, select which skip to use, don't need to select skip until it happens.
Settle into Hunting Grounds - presence can't move.

== Verify ==
Starlights Track has +1 energies
Vengeance - WreakVengeance for the Lands Corruption
VolcanoLoomingHigh doesn't allow presence ouside of mountain

==== Finish ====

Settle into hunting grounds - implement presence cannot move.
Slip the flows of time - use any # of times

====  Test  ====

Check if Gates of Deepest Power has bug that allows duplicate cards. like 1 in discard and one in hand.
Check if anything is calling Spirit.GetTargetOptions directly and skipping over Shadows ability to pay to target.
TargetSpaceCtx.IsOneOf needs tests to ensure it uses Terrain Mapper.
Test GatherTheScatteredLightOfStars - to see if forgetting a power card creates a null card.
Volcano Looming High - check if spirit can place presence outside mountain during power card use.
Explosive Erruption should not destroy volcano presence - TEST!
RepeatCardForCost - Add test that it pulls from Used actions, NOT discard pile.
Make sure win/loss is checked after every spirit action / power card
TokenCountDictionary.MoveTo (test that correct events are published)
Review SpiritPresence.RemoveFrom_NoCheck( Space space, GameState gameState ) {
Don't let Pusher/Gatherer move frozen dahan. - add tests!
Test- Bats Scoutt... secondary damage didn't seem to be working.
TEST - Upgrading or downgrading explorers with strife, should maintain strife.

==== Token Management =====
WreakVengeanceForTheLandsCorruption - virtual tokens might not be correct.
Add Token.MoveFrom method to simplify Draw-Into-Void
DahanGroupBinding.Drown should be async so UI will update.
Publish token events to the UI so that it can show token changing.

====  Not Yet Supported  =====

Visions of shifting Future - fix once we support events.
The Past Returns again - implement all spirits paying.

=========================================================
GUI
	- layout of Fear / Blight items
	- Put Build / Ravage / fear in strip along the top 
	- display # of cards remaining in fear deck before next terror level
	- Configure Game - Images for Selecting Spirits / Boards / Token colors
	- Visual indicator of Phase
	- Show fear cards while they are being resolved.
	- Create a target-space preview, when hovering over cards
	- Show back side of explore card (so they no what stage it is)
	- Display Blight Card and/or text
	- Show backside of next explorer card

AI - Search
	- Create a search tree algorythm that can play the game
	- Heuristic to measure end-of-round goodness.

	Maximizes: Power Points Played - Ignore State of the board.

	Must be aware of:
	  - items that destroy presence or return it to board
	  - items that give energy
	  - card elements
	  - items that give extraw card plays or extra draw-cards.

	Categorize cards:
	  - Attack
	  - Defend
	  - Energy
	  - Card Plays
	  - Movement
	  - Fear

-- Helpful --

Make Push a 1-step commmand
	- for custom destinations, add them to Push API
	- Embed guaranteed next decision in selecting source token
	- UI selects entire move before sequentially submitting: source token, destination

Show # of cards remaining in fear deck until next threshold

====================================================================================
== Steam updates - What's New (provide insight as to what they have trouble with) ==
https://store.steampowered.com/news/app/1236720
https://spiritislandwiki.com/index.php?title=Main_Page
http://nerdroomsoftware.com/apps/SpiritGuide/spirits.php


=====  no-events alternative "Command the Beasts" (page 20) ========

--- Setup ---

Add 1 extra fear card to Terror Level 2 of the Fear Deck.
Add the two 'Command Beasts' Reminder Cards to the Invader Deck; one before the first Stage 2 Card, the other before the first Stage 3  card
Don't use a Blight Card where the Blighted Island side has 2 Blight per player or only immediate effects.  	(Still Healthy are fine though.)

--- Game Play ---

When reaching Invader Stage 2 and Invader Stage 3, the Spirits earn the abilito to command all Beasts on the island once.

Commanding Beasts requires consensus from all Spirits during the Fast phase.

For each beast, choose one of the following:

	* 1 Damage
	* Push the beast
	* If invaders are present, 1 fear.

