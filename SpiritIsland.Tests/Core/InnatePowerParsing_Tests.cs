using Shouldly;
using System.Collections.Generic;
using System.Linq;
using System.Text.RegularExpressions;
using Xunit;

namespace SpiritIsland.Tests.Core {

	public class InnatePowerParsing_Tests {

		[Theory]
		// Thunder Speaker
		[InlineData( "This Power may be fast.", "This Power may be |{fast}|." )]
		[InlineData( "Destroy 1 town for every 2 dahan in target land.", "Destroy 1 |{town}| for every 2 |{dahan}| in target land." )]
		[InlineData( "Destroy 1 city for every 3 dahan in target land.", "Destroy 1 |{city}| for every 3 |{dahan}| in target land." )]
		[InlineData( "Gather up to 1 dahan per air you have.  Push up to 1 dahan per sun you have.", "Gather up to 1 |{dahan}| per |{air}| you have.  Push up to 1 |{dahan}| per |{sun}| you have." )]
		// River
		[InlineData( "Push 1 explorer/town.", "Push 1 |{explorer}|/|{town}|." )]
		[InlineData( "Instead, 2 Damage. Push up to 3 explorer/town.", "Instead, 2 Damage. Push up to 3 |{explorer}|/|{town}|." )]
		[InlineData( "Instead, 2 Damage to each Invader.", "Instead, 2 Damage to each Invader." )]
		// Keeper
		[InlineData( "2 Damage. Destroy 1 dahan.", "2 Damage. Destroy 1 |{dahan}|." )]
		[InlineData( "+1 Damage per sunplant you have.", "+1 Damage per |{sun}|{plant}| you have." )]
		[InlineData( "Split this Power's Damage however desired between target land and another 1 of your lands.", "Split this Power's Damage however desired between target land and another 1 of your lands." )]
		[InlineData( "Push 1 explorer from target land per 2 sun you have.", "Push 1 |{explorer}| from target land per 2 |{sun}| you have." )]
		[InlineData( "If target land has no explorer, add 1 wilds.", "If target land has no |{explorer}|, add 1 |{wilds}|." )]
		[InlineData( "This Power has +1range", "This Power has |{+1range}" )]
		public void Tokenize(string original, string parsedAndJoined ) {
			InnatePower.Tokenize( original ).Join("|").ShouldBe(parsedAndJoined);
		}

	}

}
