<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
			 xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
			 xmlns:si="clr-namespace:SpiritIsland.Maui"
			 x:DataType="si:SpiritModel"
			 x:Class="SpiritIsland.Maui.SpiritSummaryView ">

	<ContentView.Resources>
		<si:SpiritToButtonImgConverter x:Key="btnImage" />
	</ContentView.Resources>

	<HorizontalStackLayout Spacing="5" Padding="6,0">

		<Image Source="{Binding Spirit, Converter={StaticResource btnImage}}">
			<Image.GestureRecognizers>
				<TapGestureRecognizer Command="{Binding OpenSpiritPanel}" />
			</Image.GestureRecognizers>
		</Image>

		<!-- Secondary Elements -->
		<si:ElementDictView BindingContext="{Binding Elements}" />

		<!-- Placeable -->
		<CollectionView x:Name="Placeables" ItemsSource="{Binding TrackPresence}" ItemsLayout="HorizontalList" MaximumHeightRequest="50">
			<CollectionView.ItemTemplate>
				<DataTemplate x:DataType="si:TokenLocationModel" >
					<Grid HeightRequest="50">
						<!-- The Location -->
						<Image Source="{Binding LocationImage}" Margin="0,10,0,0" />
						<!-- The Token -->
						<si:TokenLocationView Margin="0,0,0,20" BindingContext="{Binding .}" WidthRequest="30" />
					</Grid>
				</DataTemplate>
			</CollectionView.ItemTemplate>
		</CollectionView>

	</HorizontalStackLayout>
	
</ContentView>
