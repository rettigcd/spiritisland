namespace SpiritIsland.NatureIncarnate;

public class IntensifyingExploitation : BlightCard {

	public IntensifyingExploitation()
		:base("Intensifying Exploitation", 
			"Ongoing, starting next turn: During Ravage Actions, Invaders deal +2 Damage (per land).", 
			5
		) 
	{}

	public override IActOn<GameState> Immediately 
		=> InvadersDoPlus2Damage().AtTheStartOfNextRound();

	static public IActOn<GameState> InvadersDoPlus2Damage() => new BaseCmd<GameState>( 
		$"From now on, During Ravage, Invaders do +2 Damage / land.",
		gs => {
			var old = gs.DefaultRavageBehavior.GetDamageFromParticipatingAttackers;
			gs.DefaultRavageBehavior.GetDamageFromParticipatingAttackers = (x) => old(x)+2; // !!! ??? does this get reset for Rewind?
		}
	);


}
